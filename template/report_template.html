<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>云客后台自动测试报告</title>
</head>
<body>
<style>
    body {
        font-family: Microsoft YaHei, Tahoma, arial, helvetica, sans-serif;
        padding: 20px;
        font-size: 100%;
    }

    table {
        border-collapse: collapse;
        padding: 15px;
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    }

    th {
        width: 7em;
        text-align: center;
        background-color: #dee2e6;
        color: #495057;
    }

    tr {
        border-top-width: 1px;
        text-align: center;
    }

    td {
        /*border: 1px solid #008000;*/
        border-bottom: 1px solid #dee2e6;
    }

    .code{
         text-align: left;
         white-space: pre-wrap;
         line-height: 10%
    }

    .trace{
         /*text-align: left;*/
         color: #f56c6c;
         white-space: pre-wrap;
         /*line-height: 10%*/
    }

    .tag {
        background-color: #ecf5ff;
        border-color: #d9ecff;
        color: #409eff;
        display: inline-block;
        height: 32px;
        padding: 0 10px;
        line-height: 30px;
        font-size: 12px;
        border-width: 1px;
        border-style: solid;
        border-radius: 4px;
        box-sizing: border-box;
        white-space: nowrap;
    }

    .success {
        background-color: #f0f9eb;
        border-color: #e1f3d8;
        color: #67c23a;
    }

    .fail {
        background-color: #fef0f0;
        border-color: #fde2e2;
        color: #f56c6c;
    }

    .miss {
        background-color: #ebebe0;
        border-color: #c2c2a3;
        color: #999966;
    }

</style>

<div class='heading'>
    <h1 style="font-family: Microsoft YaHei">{{results.project_name_zh}} 自动化测试报告</h1>
    <!--<p class='attribute'><strong>测试人员 : </strong> {{results.project_name_zh}}</p>-->
    <p class='attribute'><strong>开始时间 : </strong> {{results.start_time}}</p>
    <p class='attribute'><strong>结束时间 : </strong> {{results.end_time}}</p>
    <p class='attribute'><strong>合计耗时 : </strong> {{results.total_time}}s</p>
    <p class='attribute'><strong>测试结果 : </strong> 共 {{results.case_num}}，通过 {{results.success}}，通过率 {{results.passrate}}</p>
</div>
<div>
    <p><a class="tag success">成功({{results.success}})</a><a class="tag fail">失败({{results.error + results.failed}})</a><a class="tag miss">丢失({{results.miss_num}})</a></p>
</div>
<table>
    <tr>
        <th style="width: 20%; max-width: 20%;word-wrap:break-word; word-break:break-all;">用例名称</th>
        <th style="width: 5%; max-width: 20%;word-wrap:break-word; word-break:break-all;">状态</th>
        <th style="width: 5%; max-width: 20%;word-wrap:break-word; word-break:break-all;">耗时</th>
        <th style="width: 20%; max-width: 20%;word-wrap:break-word; word-break:break-all;">用例说明</th>
        <th style="width: 40%; max-width: 20%;word-wrap:break-word; word-break:break-all;">错误堆栈</th>
        <th style="width: 40%; max-width: 20%;word-wrap:break-word; word-break:break-all;">错误截图</th>
        <th style="width: 5%; max-width: 20%;word-wrap:break-word; word-break:break-all;">重试</th>
    </tr>
    {% for result in results.results %}
        {% for case in result.cases_info %}
            <tr>
                <td>{{case.case_name}}</td>
                    {% if case.success %}
                        <td><p class="tag success">PASS</p></td>
                    {% endif %}
                    {% if case.is_failure %}
                        <td><p class="tag fail">FAIL</p></td>
                    {% endif %}
                    {% if case.is_error %}
                        <td><p class="tag fail">ERROR</p></td>
                    {% endif %}
                <td>{{case.total_time}}s</td>
                <td>{{case.case_doc}}</td>
                <td class="trace">{{case.trace}}</td>
                <td class="image"><img style="width: 100px;" onclick="imgClick(this.src)" src={{case.image}}>-</td>
                <td>
                    <a href="https://www.baidu.com" class="tag">重试</a>
                </td>
            </tr>
        {% endfor %}
    {% endfor %}

</table>
<div id="box" onclick="boxClick()" style="width: 100%; position: fixed; top: 0; left: 0; border: 1px solid #ccc; padding: 10px; background: #fff; display: none">
    <img id="images" style="width: 100%;" onclick="imgClick()" src="">
</div>
<script>
        function imgClick (image_base64) {
			document.getElementById("box").style.display = "block"
			document.getElementById("images").src = image_base64
        }
		function boxClick() {
		document.getElementById("box").style.display = "none"
		}
</script>
</body>
</html>